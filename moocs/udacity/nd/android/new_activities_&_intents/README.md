# [New Activities & Intents](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101)

### **Goals**:
1. Mockup App UX
2. Creating and showing Toasts
3. Creating a second activity (hierarchical parent)
4. Launch with Intents (explicit vs. implict, extras)


### **Code Steps** (Original) (Feb 2015 Update)
1. **Shows Data:** ([Sunshine](https://github.com/udacity/Sunshine/tree/3.00-shows-data)) ([Sunshine 2](https://github.com/udacity/Sunshine-Version-2/tree/3.00_remove_logging))
2. **Toast:** ([Sunshine](https://github.com/udacity/Sunshine/tree/3.01-toast)) ([Sunshine 2](https://github.com/udacity/Sunshine-Version-2/tree/3.01_add_toast))
3. **Detail Activity:** ([Sunshine](https://github.com/udacity/Sunshine/tree/3.02-detail-activity)) ([Sunshine 2](https://github.com/udacity/Sunshine-Version-2/tree/3.02_create_detail_activity))
4. **Launch Detail Intent:** ([Sunshine](https://github.com/udacity/Sunshine/tree/3.03-launch-detail-intent)) ([Sunshine 2](https://github.com/udacity/Sunshine-Version-2/tree/3.03_launch_detail_activity))
5. **Display Detail Content:** ([Sunshine](https://github.com/udacity/Sunshine/tree/3.04-display-detail-content)) ([Sunshine 2](https://github.com/udacity/Sunshine-Version-2/tree/3.04_populate_detail_text))
6. **Add Settings Activity:** ([Sunshine](https://github.com/udacity/Sunshine/tree/3.05-add-settings-activity)) ([Sunshine 2](https://github.com/udacity/Sunshine-Version-2/tree/3.05_add_settingsactivity))
7. **Launch Settings:** ([Sunshine](https://github.com/udacity/Sunshine/tree/3.06-launch-settings)) ([Sunshine 2](https://github.com/udacity/Sunshine-Version-2/tree/3.06_launch_settings))
8. **Location Setting XML:** ([Sunshine](https://github.com/udacity/Sunshine/tree/3.07-location-setting-xml)) ([Sunshine 2](https://github.com/udacity/Sunshine-Version-2/tree/3.07_add_locations_setting))
9. **Inflate Settings XML:** [Sunshine](https://github.com/udacity/Sunshine/tree/3.08-inflate-settings-xml) ([Sunshine 2](https://github.com/udacity/Sunshine-Version-2/tree/3.08_inflate_settingsactivity))
10. **Get Location From Shared Pref:** ([Sunshine](https://github.com/udacity/Sunshine/tree/3.09-get-location-from-shared-pref)) ([Sunshine 2](https://github.com/udacity/Sunshine-Version-2/tree/3.09_location_from_prefs))
11. **Refactor Refresh:** ([Sunshine](https://github.com/udacity/Sunshine/tree/3.10-refactor-refresh)) ([Sunshine 2](https://github.com/udacity/Sunshine-Version-2/tree/3.10_refactor_fetch_weather))
12. ** Units Setting** ([Sunshine](https://github.com/udacity/Sunshine/tree/3.11-units-setting)) ([Sunshine 2](https://github.com/udacity/Sunshine-Version-2/tree/3.11_add_units_setting))
13. **Map Intent:** ([Sunshine](https://github.com/udacity/Sunshine/tree/3.12-map-intent)) ([Sunshine 2](https://github.com/udacity/Sunshine-Version-2/tree/3.12_add_map_intent))
14. **Add Share Action Provider:** ([Sunshine](https://github.com/udacity/Sunshine/tree/3.13-add-share-action-provider)) ([Sunshine 2](https://github.com/udacity/Sunshine-Version-2/tree/3.13_add_share_action_provider))


### **SubChapters**:
1. [Introduction to Lesson 3](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/m-1587888574)
2. [What to do next?](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/m-1622398631)
3. [Sunshine App UX Mocks](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/m-1480808705)
4. [List Item Click Listener](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1570909442/m-1570909443) ([*ListView Docs*](http://developer.android.com/reference/android/widget/ListView.html)) ([Task](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1570909442/m-1570909444)) ([Solution](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1570909442/m-1570909445))
5. [ItemClickListener and Toast](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1480808706/m-1480808707) (*[Toast Docs](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)*) ([Task](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1480808706/m-1480808708)) ([Solution](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1480808706/m-1480808709))
6. [Create New Activity](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1480808710/m-1480808711) (*[Providing Up Navigation](http://developer.android.com/training/implementing-navigation/ancestral.html)*) ([Solution](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1480808710/m-1480808713))
7. [Intents Framework](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/m-1628289061) ([*Intents & Intent Filters*](http://developer.android.com/guide/components/intents-filters.html))
8. [Intents as Envelopes](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/m-1643678724)
9. [Launch DetailActivity](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1480808714/m-1480808715) ([*Intents API*](http://developer.android.com/reference/android/content/Intent.html)) ([Task](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1480808714/m-1480808715)) ([Solution](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1480808714/m-1480808717))
10. [Display Content in Detail Activity](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1480808718/m-1480808719) ([Task](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1480808718/m-1480808720)) ([Solution](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1480808718/m-1480808721))
11. [It Works](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/m-1576968695)
12. [Settings UX](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/m-1643578573) ([*Settings Docs*](https://developer.android.com/design/patterns/settings.html))
13. [Preferences](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/m-1643578574) ([*Settings Developer Guide*](http://developer.android.com/guide/topics/ui/settings.html)), ([*Shared Preferences*](http://developer.android.com/reference/android/content/SharedPreferences.html))
14. [Create SettingsActivity](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1643578576/m-1643578575) (*[PreferenceActivity](http://developer.android.com/reference/android/preference/PreferenceActivity.html)* vs. [*PreferenceFragment*](http://developer.android.com/reference/android/preference/PreferenceFragment.html)) ([Gist](https://gist.github.com/anonymous/79957488c47f2fb35a88)) ([Task](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1643578576/m-1643578577)) ([Solution](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1643578576/m-1643578578))
15. [Launch Settings Activity](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1643578580/m-1643578579) ([Task](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1643578580/m-1643578581))([Solution](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1643578580/m-1643578582))
16. [Location Setting XML](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1643578583/m-1643578585) ([*Defining Preferences in XML*](https://developer.android.com/guide/topics/ui/settings.html#DefiningPrefs)) ([Task](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1643578583/m-1643578584))
17. [Modify SettingsActivity](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1643578589/m-1643578588) ([*Saving Key-Value Sets*](http://developer.android.com/training/basics/data-storage/shared-preferences.html)) ([Task](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1643578589/m-1643578590))
18. [Use SharedPreferences](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1576148605/m-1643578591) ([*SharedPreferences docs*](http://developer.android.com/reference/android/content/SharedPreferences.html)) ([Task](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1576148605/m-1576148606)) ([Solution](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1576148605/m-1643578596))
19. [Update Data on ActivityStart](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/m-1643578597)
20. [Temperature Unit Settings](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1643578599/m-1643578598) ([Task](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1643578599/m-1643578600)) ([Solution](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1643578599/m-1643578601))
21. [Debug Breakpoints](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/m-1643578602)
22. [Launching Implicit Intents](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/m-1637238591) ([*Common Intents*](https://developer.android.com/guide/components/intents-common.html)) and ([*Map Intents*](https://developer.android.com/guide/components/intents-common.html#Maps))
23. [Add Map Location Intent](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1480808722/m-1480808723) ([Task](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1480808722/m-1480808724)) ([Solution](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1480808722/m-1480808725))
24. [Intent Resolution](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/m-1643578603)
25. [Share Intent](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1480808726/m-1480808727) (*ShareActionProvider [Usage](http://developer.android.com/training/sharing/shareaction.html) & [Docs](http://developer.android.com/reference/android/widget/ShareActionProvider.html)*) ([Task](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1480808726/m-1480808728)) [(Solution)](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1480808726/m-1643578595)
26. [Broadcast Intents](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/m-1631278613)
27. [Intent Filters](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1643578605/m-1643578604) [(Task)](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1643578605/m-1643578606) [(Solution)](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/e-1643578605/m-1643578607)
28. [Lesson 3 Recap](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/m-1562649277)
29. [Storytime: Android Distribution Platform](https://www.udacity.com/course/viewer#!/c-ud853/l-1474559101/m-1571548639)



### **Lesson Resources**
1. [ListView Documentation](http://developer.android.com/reference/android/widget/ListView.html)
2. [Toast Documentation](http://developer.android.com/guide/topics/ui/notifiers/toasts.html#Basics)
3. [Context documentation](http://developer.android.com/reference/android/content/Context.html)
4. About [Parent Activity](http://developer.android.com/training/basics/firstapp/starting-activity.html#CreateActivity), [Up vs. Back](http://developer.android.com/design/patterns/navigation.html)
5. [Common Intents](http://developer.android.com/guide/components/intents-common.html)
6. [Example of Explicit Intent](http://developer.android.com/guide/components/intents-filters.html#ExampleExplicit)
7. [Settings Pattern](https://developer.android.com/design/patterns/settings.html) and [Settings Guide](http://developer.android.com/guide/topics/ui/settings.html)
8. [Action Bar](https://developer.android.com/guide/topics/ui/actionbar.html)
8. [SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)
9. [ch 23] [Common Intents](https://developer.android.com/guide/components/intents-common.html) -- [for Maps](https://developer.android.com/guide/components/intents-common.html#Maps).
10. [ch 24] [Intents and Intent Filters](http://developer.android.com/guide/components/intents-filters.html)
11. [ch 25] [ShareActionProvider](http://developer.android.com/reference/android/widget/ShareActionProvider.html) and [Adding an Easy Share Action](http://developer.android.com/training/sharing/shareaction.html)*
12. [ch 26] [Listening for and Broadcasting Global Messages..](https://developer.android.com/guide/faq/commontasks.html#broadcastreceivers), [BroadcastReceiver Reference](http://developer.android.com/reference/android/content/BroadcastReceiver.html), [Vogella Tutorial](http://www.vogella.com/tutorials/AndroidBroadcastReceiver/article.html)



### **Notes**
1. **Application Context** can be obtained by calling *getActivity()* from the fragment. The host activity effectively encapsulates application Context.
2. **Hierarchical Parent:** refers to the activity that will be the parent (or precursor) activity that will be reached when you press the *back* button on the current activity menu (top left)
3. **Settings** is a place where users indicate their preferences for application behavior. By default it has the lowest priority amongst menu options, and always occurs in the *overflow* area of the [ActionBar](https://developer.android.com/design/patterns/actionbar.html).
4. **Preferences** are used to provide Settings management for your application. Each Setting option is built using an appropriate [Preference](http://developer.android.com/reference/android/preference/Preference.html) subclass which provides a relevant UI component (e.g., CheckBoxPreference, ListPreference, EditTextPreference) backed by a [SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html) data store where the value of that setting is persisted.
5. **Preferences Setup** Note that adding a Preference requires multiple steps
    * Create a *SettingsActivity* and declare it in your Manifest. In your Activity *onOptionsItemSelected()* callback, make sure you start this activity (with an Intent) if the Settings option is selected in the action bar
    * Declare *values* resources (strings, arrays) for the various labels and values that will be shown in these preferences. These will be used in the next steps.
    * Create the *PreferencesScreen* resource (xml/pref\_general.xml) with one [*Preference*](http://developer.android.com/reference/android/preference/Preference.html) subclass (e.g., CheckBoxPreference, ListPreference, EditTextPreference..) for each setting.Group into a *PreferenceCategory* for clarity if required.
    * In the SettingsActivity *onCreate()* callback make sure you add preferences from this resource to that activity using the *addPreferencesFromResource(xmlResourceID)* method.
    * Have the SettingsActivity implement *OnPreferenceChangeListener* so it can respond to user changes on any setting key. In the *onCreate* methods, make sure you attach the listener to each Preference in that settings view to automate saving/update of preference changes.
6. **Intent Creation.** Read about intents and [how to build an intent](http://developer.android.com/guide/components/intents-filters.html#Building).
    * An intent typically carries the following information: an *action* (to be taken), the *data* (consisting of a Uri and/or MIME type), a *category* (classifying the kind of component that should handle this intent) and *a component name* (if the targeted component is explicitly identified). Some of these fields (e.g., category, component name) are optional.
    * In addition, it can carry *Extras* (a blob of name-value pairs) that contains additional context or information (non-data) for carrying out the action.
7.


### **Issues (Q&A)**

*We'll use this section to document and answer popular questions from study participants about this lesson.*

1. **TargetSDK Issues**. You may have experienced one of these two issues below if your target SDK was set to the latest version (21).To fix, follow the approach in the second link below - you will need to edit the app/gradle file
    * [SettingsActivity does not show back button](http://forums.udacity.com/questions/100256895/settings-activity-doesnt-have-a-back-button?page=1&focusedAnswerId=100256962#100256962)
    * [Settings Title not showing ...](http://forums.udacity.com/questions/100239055/settings-title-not-showing-up-after-clicking-on-menu-item-settings#ud853)
    * [Share menu does not work](http://forums.udacity.com/questions/100247425/share-doesnt-works-on-detailactivityjava?page=1&focusedAnswerId=100270768#100270768)


